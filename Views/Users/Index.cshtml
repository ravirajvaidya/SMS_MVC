@model SMS_MVC.Models.UserDashboardModel

@{
    Layout = "_LayoutDashboard";   // Your custom dashboard layout
}

<div class="container-fluid px-4">

    <!-- Header Section -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="fw-bold">User Management</h2>
            <p class="text-muted mb-0">Manage all users, roles, and permissions</p>
        </div>

        <form method="post" asp-action="PageAddUser">
            <button class="btn btn-primary px-4">+ Add User</button>
        </form>
    </div>

    <!-- Summary Cards -->
    <div class="row g-3 mb-4">
        <div class="col-md-2">
            <div class="card text-center shadow-sm border-0" style="background-color: #E5D9FA;">
                <div class="card-body">
                    <h4 class="fw-bold">@Model.TotalUsers</h4>
                    <p class="mb-0 text-dark">Total Users</p>
                </div>
            </div>
        </div>

        <div class="col-md-2">
            <div class="card text-center shadow-sm border-0" style="background-color: #FDECE3;">
                <div class="card-body">
                    <h4 class="fw-bold">@Model.Admins</h4>
                    <p class="mb-0 text-dark">Admins</p>
                </div>
            </div>
        </div>

        <div class="col-md-2">
            <div class="card text-center shadow-sm border-0" style="background-color: #E4F1FB;">
                <div class="card-body">
                    <h4 class="fw-bold">@Model.Teachers</h4>
                    <p class="mb-0 text-dark">Teachers</p>
                </div>
            </div>
        </div>

        <div class="col-md-2">
            <div class="card text-center shadow-sm border-0" style="background-color: #E5F6EA;">
                <div class="card-body">
                    <h4 class="fw-bold">@Model.Parents</h4>
                    <p class="mb-0 text-dark">Parents</p>
                </div>
            </div>
        </div>

        <div class="col-md-2">
            <div class="card text-center shadow-sm border-0" style="background-color: #F5F5F5;">
                <div class="card-body">
                    <h4 class="fw-bold">@Model.Accountants</h4>
                    <p class="mb-0 text-dark">Accountants</p>
                </div>
            </div>
        </div>

        <div class="col-md-2">
            <div class="card text-center shadow-sm border-0" style="background-color: #F5F5F5;">
                <div class="card-body">
                    <h4 class="fw-bold">@Model.Librarians</h4>
                    <p class="mb-0 text-dark">Librarians</p>
                </div>
            </div>
        </div>
    </div>

    <!-- System Users Section -->
    <div class="card border-0 shadow-sm">
        <div class="card-body">

            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="fw-semibold mb-0"><i class="bi bi-shield-lock me-2"></i>System Users</h5>
            </div>

            <!-- Tabs -->
            <ul class="nav nav-tabs mb-3">
                <li class="nav-item">
                    <form method="get" asp-action="Index">
                        <input type="hidden" name="tab" value="All" />
                        <button class="nav-link @(Model.ActiveTab == "All" ? "active" : "")">All Users</button>
                    </form>
                </li>
                <li class="nav-item">
                    <form method="get" asp-action="Index">
                        <input type="hidden" name="tab" value="Admins" />
                        <button class="nav-link @(Model.ActiveTab == "Admins" ? "active" : "")">Admin</button>
                    </form>
                </li>
                <li class="nav-item">
                    <form method="get" asp-action="Index">
                        <input type="hidden" name="tab" value="Teachers" />
                        <button class="nav-link @(Model.ActiveTab == "Teachers" ? "active" : "")">Teacher</button>
                    </form>
                </li>
                <li class="nav-item">
                    <form method="get" asp-action="Index">
                        <input type="hidden" name="tab" value="Parents" />
                        <button class="nav-link @(Model.ActiveTab == "Parents" ? "active" : "")">Parent</button>
                    </form>
                </li>
                <li class="nav-item">
                    <form method="get" asp-action="Index">
                        <input type="hidden" name="tab" value="Accountants" />
                        <button class="nav-link @(Model.ActiveTab == "Accountants" ? "active" : "")">Accountant</button>
                    </form>
                </li>
                <li class="nav-item">
                    <form method="get" asp-action="Index">
                        <input type="hidden" name="tab" value="Librarians" />
                        <button class="nav-link @(Model.ActiveTab == "Librarians" ? "active" : "")">Librarians</button>
                    </form>
                </li>
                <li class="nav-item">
                    <form method="get" asp-action="Index">
                        <input type="hidden" name="tab" value="Staff" />
                        <button class="nav-link @(Model.ActiveTab == "Staff" ? "active" : "")">Staff</button>
                    </form>
                </li>
            </ul>

            <!-- Users Table -->
            <table class="table table-borderless align-middle mb-0">
                <thead>
                    <tr>
                        <th>User</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var user in Model._Users)
                    {
                        <tr>
                            <td>
                                <div class="d-flex align-items-center">
                                    <div class="bg-success bg-opacity-10 text-success fw-bold rounded-circle d-flex align-items-center justify-content-center me-3"
                                         style="width: 40px; height: 40px;">
                                        @user.UserName.Substring(0, 1).ToUpper()
                                    </div>
                                    <div>
                                        <div class="fw-semibold">@user.UserName</div>
                                        <small class="text-muted">@user.Email</small><br />
                                    </div>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>

        </div>
    </div>

</div>
